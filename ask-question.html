<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ржкрзНрж░рж╢рзНржи ржХрж░рзБржи - CuraFam</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <a href="index.html" style="color: white; text-decoration: none; display: flex; align-items: center;">
                        <img src="logo.png.png" alt="CuraFam" style="height: 40px; margin-right: 10px;">
                        <h2>CuraFam</h2>
                    </a>
                </div>
                
                <ul class="nav-menu">
                    <li class="nav-item"><a href="index.html" class="nav-link">рж╣рзЛржо</a></li>
                    <li class="nav-item"><a href="browse-qa.html" class="nav-link">ржкрзНрж░рж╢рзНржи ржУ ржЙрждрзНрждрж░</a></li>
                    <li class="nav-item"><a href="doctor-portal.html" class="nav-link">ржбрж╛ржХрзНрждрж╛рж░ ржкрзЛрж░рзНржЯрж╛рж▓</a></li>
                    <li class="nav-item"><a href="emergency.html" class="nav-link">ржЬрж░рзБрж░рж┐ рж╕рзЗржмрж╛</a></li>
                </ul>

                <div class="hamburger" onclick="toggleMobileMenu()">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <div class="container">
            <div class="form-container">
                <h1>ржкрзНрж░рж╢рзНржи ржХрж░рзБржи</h1>
                <p>ржЖржкржирж╛рж░ рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕ржорж╕рзНржпрж╛рж░ ржЬржирзНржп ржмрж┐ржирж╛ржорзВрж▓рзНржпрзЗ ржЪрж┐ржХрж┐рзОрж╕рж╛ ржкрж░рж╛ржорж░рзНрж╢ ржирж┐ржи</p>

                <form id="questionForm">
                    <div class="form-group">
                        <label for="questionType">ржкрзНрж░рж╢рзНржирзЗрж░ ржзрж░ржи *</label>
                        <select id="questionType" name="questionType" onchange="changeQuestionType()">
                            <option value="human">ЁЯСи ржорж╛ржирзБрж╖рзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп</option>
                            <option value="animal">ЁЯР╢ ржкрж╢рзБрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="patientName">рж░рзЛржЧрзАрж░ ржирж╛ржо *</label>
                        <input type="text" id="patientName" name="patientName" required placeholder="рж░рзЛржЧрзАрж░ ржирж╛ржо рж▓рж┐ржЦрзБржи">
                    </div>

                    <div class="form-group">
                        <label for="patientAge">ржмржпрж╝рж╕</label>
                        <input type="text" id="patientAge" name="patientAge" placeholder="ржпрзЗржоржи: рзирзл ржмржЫрж░ ржмрж╛ рзй ржорж╛рж╕">
                    </div>

                    <div class="form-group" id="genderGroup">
                        <label for="patientGender">рж▓рж┐ржЩрзНржЧ</label>
                        <select id="patientGender" name="patientGender">
                            <option value="">ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>
                            <option value="male">ржкрзБрж░рзБрж╖</option>
                            <option value="female">ржорж╣рж┐рж▓рж╛</option>
                            <option value="other">ржЕржирзНржпрж╛ржирзНржп</option>
                        </select>
                    </div>

                    <div class="form-group" id="speciesGroup" style="display: none;">
                        <label for="animalSpecies">ржкрж╢рзБрж░ ржкрзНрж░ржЬрж╛рждрж┐</label>
                        <select id="animalSpecies" name="animalSpecies">
                            <option value="">ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>
                            <option value="dog">ржХрзБржХрзБрж░</option>
                            <option value="cat">ржмрж┐ржбрж╝рж╛рж▓</option>
                            <option value="cow">ржЧрж░рзБ</option>
                            <option value="goat">ржЫрж╛ржЧрж▓</option>
                            <option value="chicken">ржорзБрж░ржЧрж┐</option>
                            <option value="bird">ржкрж╛ржЦрж┐</option>
                            <option value="fish">ржорж╛ржЫ</option>
                            <option value="other">ржЕржирзНржпрж╛ржирзНржп</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="questionTitle">ржкрзНрж░рж╢рзНржирзЗрж░ рж╢рж┐рж░рзЛржирж╛ржо *</label>
                        <input type="text" id="questionTitle" name="questionTitle" 
                               placeholder="рж╕ржВржХрзНрж╖рзЗржкрзЗ ржЖржкржирж╛рж░ рж╕ржорж╕рзНржпрж╛ ржмрж░рзНржгржирж╛ ржХрж░рзБржи" required>
                    </div>

                    <div class="form-group">
                        <label for="questionContent">ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржмрж┐ржмрж░ржг *</label>
                        <textarea id="questionContent" name="questionContent" 
                                  placeholder="ржЖржкржирж╛рж░ рж╕ржорж╕рзНржпрж╛рж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржмрж┐ржмрж░ржг ржжрж┐ржиред рж▓ржХрзНрж╖ржг, ржХрждржжрж┐ржи ржзрж░рзЗ, ржХрзЛржи ржЪрж┐ржХрж┐рзОрж╕рж╛ ржирж┐ржпрж╝рзЗржЫрзЗржи ржЗрждрзНржпрж╛ржжрж┐ рж▓рж┐ржЦрзБржи" 
                                  required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="contactInfo">ржпрзЛржЧрж╛ржпрзЛржЧрзЗрж░ рждржерзНржп (ржРржЪрзНржЫрж┐ржХ)</label>
                        <input type="text" id="contactInfo" name="contactInfo" 
                               placeholder="ржлрзЛржи ржиржорзНржмрж░ ржмрж╛ ржЗржорзЗржЗрж▓ (ржЬрж░рзБрж░рж┐ ржпрзЛржЧрж╛ржпрзЛржЧрзЗрж░ ржЬржирзНржп)">
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="privacyConsent" required>
                            ржЖржорж┐ рж╕ржорзНржоржд ржпрзЗ ржЖржорж╛рж░ ржкрзНрж░рж╢рзНржи ржУ ржЙрждрзНрждрж░ ржЕржирзНржпржжрзЗрж░ рж╕рж╛рж╣рж╛ржпрзНржпрзЗрж░ ржЬржирзНржп ржкрзНрж░ржХрж╛рж╢ ржХрж░рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ (ржмрзНржпржХрзНрждрж┐ржЧржд рждржерзНржп ржЧрзЛржкржирзАржпрж╝ рж░рж╛ржЦрж╛ рж╣ржмрзЗ)
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary" id="submitBtn">ржкрзНрж░рж╢рзНржи ржЬржорж╛ ржжрж┐ржи</button>
                </form>

                <div class="form-info">
                    <h3>ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рждржерзНржп:</h3>
                    <ul>
                        <li>тЬЕ рж╕ржорзНржкрзВрж░рзНржг ржмрж┐ржирж╛ржорзВрж▓рзНржпрзЗ рж╕рзЗржмрж╛</li>
                        <li>тЬЕ рзирзк ржШржирзНржЯрж╛рж░ ржоржзрзНржпрзЗ ржЙрждрзНрждрж░ ржкрж╛ржмрзЗржи</li>
                        <li>тЬЕ ржпрзЛржЧрзНржп ржУ ржЕржнрж┐ржЬрзНржЮ ржбрж╛ржХрзНрждрж╛рж░ржжрзЗрж░ ржкрж░рж╛ржорж░рзНрж╢</li>
                        <li>тЪая╕П ржЬрж░рзБрж░рж┐ ржЕржмрж╕рзНржерж╛ржпрж╝ рж╕рж░рж╛рж╕рж░рж┐ рж╣рж╛рж╕ржкрж╛рждрж╛рж▓рзЗ ржпрж╛ржи</li>
                        <li>тЪая╕П ржПржЗ ржкрж░рж╛ржорж░рзНрж╢ рж╕рж░рж╛рж╕рж░рж┐ ржЪрж┐ржХрж┐рзОрж╕рж╛рж░ ржмрж┐ржХрж▓рзНржк ржиржпрж╝</li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>CuraFam</h3>
                    <p>ржЖржкржирж╛рж░ ржкрж░рж┐ржмрж╛рж░рзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рзЗржмрж╛</p>
                </div>
                <div class="footer-section">
                    <h4>ржжрзНрж░рзБржд рж▓рж┐ржВржХ</h4>
                    <ul>
                        <li><a href="index.html">рж╣рзЛржо</a></li>
                        <li><a href="browse-qa.html">ржЙрждрзНрждрж░ ржмрзНрж░рж╛ржЙржЬ ржХрж░рзБржи</a></li>
                        <li><a href="doctor-portal.html">ржбрж╛ржХрзНрждрж╛рж░ ржкрзЛрж░рзНржЯрж╛рж▓</a></li>
                        <li><a href="emergency.html">ржЬрж░рзБрж░рж┐ рж╕рзЗржмрж╛</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 CuraFam. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        let currentType = 'human';
        const API_BASE = 'https://curafam.onrender.com';

        function toggleMobileMenu() {
            const navMenu = document.querySelector('.nav-menu');
            const hamburger = document.querySelector('.hamburger');
            
            navMenu.classList.toggle('active');
            hamburger.classList.toggle('active');
        }

        function changeQuestionType() {
            const select = document.getElementById('questionType');
            const genderGroup = document.getElementById('genderGroup');
            const speciesGroup = document.getElementById('speciesGroup');
            
            currentType = select.value;
            
            if (currentType === 'animal') {
                genderGroup.style.display = 'none';
                speciesGroup.style.display = 'block';
            } else {
                genderGroup.style.display = 'block';
                speciesGroup.style.display = 'none';
            }
        }

        document.getElementById('questionForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.textContent;
            
            // Show loading
            submitBtn.textContent = 'ржЬржорж╛ ржжрзЗржУржпрж╝рж╛ рж╣ржЪрзНржЫрзЗ...';
            submitBtn.disabled = true;
            
            const formData = new FormData(this);
            const questionData = {
                type: currentType,
                patientName: formData.get('patientName'),
                age: formData.get('patientAge'),
                title: formData.get('questionTitle'),
                description: formData.get('questionContent')
            };

            // Basic validation
            if (!questionData.patientName || !questionData.title || !questionData.description) {
                alert('ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ рж╕ржм ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржХрзНрж╖рзЗрждрзНрж░ ржкрзВрж░ржг ржХрж░рзБржиред');
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/api/questions`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(questionData)
                });

                if (response.ok) {
                    alert('ржЖржкржирж╛рж░ ржкрзНрж░рж╢рзНржи рж╕ржлрж▓ржнрж╛ржмрзЗ ржЬржорж╛ ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝рзЗржЫрзЗ! рж╢рзАржШрзНрж░ржЗ ржбрж╛ржХрзНрждрж╛рж░ржжрзЗрж░ ржХрж╛ржЫ ржерзЗржХрзЗ ржЙрждрзНрждрж░ ржкрж╛ржмрзЗржиред');
                    this.reset();
                    
                    currentType = 'human';
                    document.getElementById('questionType').value = 'human';
                    document.getElementById('genderGroup').style.display = 'block';
                    document.getElementById('speciesGroup').style.display = 'none';
                    
                    setTimeout(() => {
                        window.location.href = 'browse-qa.html';
                    }, 2000);
                } else {
                    const errorData = await response.json().catch(() => ({}));
                    alert('ржкрзНрж░рж╢рзНржи ржЬржорж╛ ржжрж┐рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ: ' + (errorData.error || 'Server error'));
                }
            } catch (error) {
                console.error('Error submitting question:', error);
                alert('ржкрзНрж░рж╢рзНржи ржЬржорж╛ ржжрж┐рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗред ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕ржВржпрзЛржЧ ржЪрзЗржХ ржХрж░рзБржи ржПржмржВ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред');
            } finally {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });
    </script>
</body>
</html>